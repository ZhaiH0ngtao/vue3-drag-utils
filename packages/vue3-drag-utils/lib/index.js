"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const u=require("vue");function Z(t,e,r){return Array.isArray(t)?(t.length=Math.max(t.length,e),t.splice(e,1,r),r):(t[e]=r,r)}var ve=Symbol("DndContextType");function Me(t){u.provide(ve,t)}function Le(){return u.inject(ve)}var b;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(b||(b={}));function f(t,e,...r){if(ke()&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let n;if(e===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let i=0;n=new Error(e.replace(/%s/g,function(){return r[i++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function ke(){return typeof process<"u"&&process.env.NODE_ENV==="production"}const B="dnd-core/INIT_COORDS",x="dnd-core/BEGIN_DRAG",Y="dnd-core/PUBLISH_DRAG_SOURCE",R="dnd-core/HOVER",A="dnd-core/DROP",M="dnd-core/END_DRAG";function ee(t,e){return{type:B,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}function He(t,e,r){return e.split(".").reduce((n,i)=>n&&n[i]?n[i]:r||null,t)}function je(t,e){return t.filter(r=>r!==e)}function me(t){return typeof t=="object"}function Ue(t,e){const r=new Map,n=o=>{r.set(o,r.has(o)?r.get(o)+1:1)};t.forEach(n),e.forEach(n);const i=[];return r.forEach((o,s)=>{o===1&&i.push(s)}),i}function $e(t,e){return t.filter(r=>e.indexOf(r)>-1)}const Ve={type:B,payload:{clientOffset:null,sourceClientOffset:null}};function Fe(t){return function(r=[],n={publishSource:!0}){const{publishSource:i=!0,clientOffset:o,getSourceClientOffset:s}=n,a=t.getMonitor(),c=t.getRegistry();t.dispatch(ee(o)),qe(r,a,c);const l=Ye(r,a);if(l==null){t.dispatch(Ve);return}let h=null;if(o){if(!s)throw new Error("getSourceClientOffset must be defined");Ge(s),h=s(l)}t.dispatch(ee(o,h));const p=c.getSource(l).beginDrag(a,l);if(p==null)return;Be(p),c.pinSource(l);const d=c.getSourceType(l);return{type:x,payload:{itemType:d,item:p,sourceId:l,clientOffset:o||null,sourceClientOffset:h||null,isSourcePublic:!!i}}}}function qe(t,e,r){f(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(n){f(r.getSource(n),"Expected sourceIds to be registered.")})}function Ge(t){f(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function Be(t){f(me(t),"Item must be an object.")}function Ye(t,e){let r=null;for(let n=t.length-1;n>=0;n--)if(e.canDragSource(t[n])){r=t[n];break}return r}function We(t){return function(){if(t.getMonitor().isDragging())return{type:Y}}}function F(t,e){return e===null?t===null:Array.isArray(t)?t.some(r=>r===e):t===e}function Xe(t){return function(r,{clientOffset:n}={}){ze(r);const i=r.slice(0),o=t.getMonitor(),s=t.getRegistry();Qe(i,o,s);const a=o.getItemType();return Ke(i,s,a),Je(i,o,s),{type:R,payload:{targetIds:i,clientOffset:n||null}}}}function ze(t){f(Array.isArray(t),"Expected targetIds to be an array.")}function Qe(t,e,r){f(e.isDragging(),"Cannot call hover while not dragging."),f(!e.didDrop(),"Cannot call hover after drop.");for(let n=0;n<t.length;n++){const i=t[n];f(t.lastIndexOf(i)===n,"Expected targetIds to be unique in the passed array.");const o=r.getTarget(i);f(o,"Expected targetIds to be registered.")}}function Ke(t,e,r){for(let n=t.length-1;n>=0;n--){const i=t[n],o=e.getTargetType(i);F(o,r)||t.splice(n,1)}}function Je(t,e,r){t.forEach(function(n){r.getTarget(n).hover(e,n)})}function Ze(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function et(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){Ze(t,i,r[i])})}return t}function tt(t){return function(r={}){const n=t.getMonitor(),i=t.getRegistry();rt(n),ot(n).forEach((s,a)=>{const c=nt(s,a,i,n),l={type:A,payload:{dropResult:et({},r,c)}};t.dispatch(l)})}}function rt(t){f(t.isDragging(),"Cannot call drop while not dragging."),f(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function nt(t,e,r,n){const i=r.getTarget(t);let o=i?i.drop(n,t):void 0;return it(o),typeof o>"u"&&(o=e===0?{}:n.getDropResult()),o}function it(t){f(typeof t>"u"||me(t),"Drop result must either be an object or undefined.")}function ot(t){const e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function st(t){return function(){const r=t.getMonitor(),n=t.getRegistry();at(r);const i=r.getSourceId();return i!=null&&(n.getSource(i,!0).endDrag(r,i),n.unpinSource()),{type:M}}}function at(t){f(t.isDragging(),"Cannot call endDrag while not dragging.")}function ut(t){return{beginDrag:Fe(t),publishDragSource:We(t),hover:Xe(t),drop:tt(t),endDrag:st(t)}}class ct{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:r}=this.store;function n(o){return(...s)=>{const a=o.apply(e,s);typeof a<"u"&&r(a)}}const i=ut(this);return Object.keys(i).reduce((o,s)=>{const a=i[s];return o[s]=n(a),o},{})}dispatch(e){this.store.dispatch(e)}constructor(e,r){this.isSetUp=!1,this.handleRefCountChange=()=>{const n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=r,e.subscribe(this.handleRefCountChange)}}function O(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var te=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),H=function(){return Math.random().toString(36).substring(7).split("").join(".")},re={INIT:"@@redux/INIT"+H(),REPLACE:"@@redux/REPLACE"+H(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+H()}};function lt(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function dt(t){if(t===void 0)return"undefined";if(t===null)return"null";var e=typeof t;switch(e){case"boolean":case"string":case"number":case"symbol":case"function":return e}if(Array.isArray(t))return"array";if(ht(t))return"date";if(gt(t))return"error";var r=ft(t);switch(r){case"Symbol":case"Promise":case"WeakMap":case"WeakSet":case"Map":case"Set":return r}return e.slice(8,-1).toLowerCase().replace(/\s/g,"")}function ft(t){return typeof t.constructor=="function"?t.constructor.name:null}function gt(t){return t instanceof Error||typeof t.message=="string"&&t.constructor&&typeof t.constructor.stackTraceLimit=="number"}function ht(t){return t instanceof Date?!0:typeof t.toDateString=="function"&&typeof t.getDate=="function"&&typeof t.setDate=="function"}function T(t){var e=typeof t;return process.env.NODE_ENV!=="production"&&(e=dt(t)),e}function ye(t,e,r){var n;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(process.env.NODE_ENV==="production"?O(0):"It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.");if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(process.env.NODE_ENV==="production"?O(1):"Expected the enhancer to be a function. Instead, received: '"+T(r)+"'");return r(ye)(t,e)}if(typeof t!="function")throw new Error(process.env.NODE_ENV==="production"?O(2):"Expected the root reducer to be a function. Instead, received: '"+T(t)+"'");var i=t,o=e,s=[],a=s,c=!1;function l(){a===s&&(a=s.slice())}function h(){if(c)throw new Error(process.env.NODE_ENV==="production"?O(3):"You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return o}function v(g){if(typeof g!="function")throw new Error(process.env.NODE_ENV==="production"?O(4):"Expected the listener to be a function. Instead, received: '"+T(g)+"'");if(c)throw new Error(process.env.NODE_ENV==="production"?O(5):"You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api/store#subscribelistener for more details.");var m=!0;return l(),a.push(g),function(){if(m){if(c)throw new Error(process.env.NODE_ENV==="production"?O(6):"You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api/store#subscribelistener for more details.");m=!1,l();var S=a.indexOf(g);a.splice(S,1),s=null}}}function p(g){if(!lt(g))throw new Error(process.env.NODE_ENV==="production"?O(7):"Actions must be plain objects. Instead, the actual type was: '"+T(g)+"'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.");if(typeof g.type>"u")throw new Error(process.env.NODE_ENV==="production"?O(8):'Actions may not have an undefined "type" property. You may have misspelled an action type string constant.');if(c)throw new Error(process.env.NODE_ENV==="production"?O(9):"Reducers may not dispatch actions.");try{c=!0,o=i(o,g)}finally{c=!1}for(var m=s=a,D=0;D<m.length;D++){var S=m[D];S()}return g}function d(g){if(typeof g!="function")throw new Error(process.env.NODE_ENV==="production"?O(10):"Expected the nextReducer to be a function. Instead, received: '"+T(g));i=g,p({type:re.REPLACE})}function y(){var g,m=v;return g={subscribe:function(S){if(typeof S!="object"||S===null)throw new Error(process.env.NODE_ENV==="production"?O(11):"Expected the observer to be an object. Instead, received: '"+T(S)+"'");function E(){S.next&&S.next(h())}E();var k=m(E);return{unsubscribe:k}}},g[te]=function(){return this},g}return p({type:re.INIT}),n={dispatch:p,subscribe:v,getState:h,replaceReducer:d},n[te]=y,n}const pt=(t,e)=>t===e;function vt(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function mt(t,e,r=pt){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!r(t[n],e[n]))return!1;return!0}function yt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Dt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){yt(t,i,r[i])})}return t}const ne={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function St(t=ne,e){const{payload:r}=e;switch(e.type){case B:case x:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case R:return vt(t.clientOffset,r.clientOffset)?t:Dt({},t,{clientOffset:r.clientOffset});case M:case A:return ne;default:return t}}const W="dnd-core/ADD_SOURCE",X="dnd-core/ADD_TARGET",z="dnd-core/REMOVE_SOURCE",L="dnd-core/REMOVE_TARGET";function Ot(t){return{type:W,payload:{sourceId:t}}}function bt(t){return{type:X,payload:{targetId:t}}}function Et(t){return{type:z,payload:{sourceId:t}}}function Tt(t){return{type:L,payload:{targetId:t}}}function It(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){It(t,i,r[i])})}return t}const wt={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function Ct(t=wt,e){const{payload:r}=e;switch(e.type){case x:return I({},t,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case Y:return I({},t,{isSourcePublic:!0});case R:return I({},t,{targetIds:r.targetIds});case L:return t.targetIds.indexOf(r.targetId)===-1?t:I({},t,{targetIds:je(t.targetIds,r.targetId)});case A:return I({},t,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case M:return I({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function _t(t=0,e){switch(e.type){case W:case X:return t+1;case z:case L:return t-1;default:return t}}const w=[],Q=[];w.__IS_NONE__=!0;Q.__IS_ALL__=!0;function Nt(t,e){return t===w?!1:t===Q||typeof e>"u"?!0:$e(e,t).length>0}function Pt(t=w,e){switch(e.type){case R:break;case W:case X:case L:case z:return w;case x:case Y:case M:case A:default:return Q}const{targetIds:r=[],prevTargetIds:n=[]}=e.payload,i=Ue(r,n);if(!(i.length>0||!mt(r,n)))return w;const s=n[n.length-1],a=r[r.length-1];return s!==a&&(s&&i.push(s),a&&i.push(a)),i}function xt(t=0){return t+1}function Rt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function At(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){Rt(t,i,r[i])})}return t}function Mt(t={},e){return{dirtyHandlerIds:Pt(t.dirtyHandlerIds,{type:e.type,payload:At({},e.payload,{prevTargetIds:He(t,"dragOperation.targetIds",[])})}),dragOffset:St(t.dragOffset,e),refCount:_t(t.refCount,e),dragOperation:Ct(t.dragOperation,e),stateId:xt(t.stateId)}}function Lt(t,e){return{x:t.x+e.x,y:t.y+e.y}}function De(t,e){return{x:t.x-e.x,y:t.y-e.y}}function kt(t){const{clientOffset:e,initialClientOffset:r,initialSourceClientOffset:n}=t;return!e||!r||!n?null:De(Lt(e,n),r)}function Ht(t){const{clientOffset:e,initialClientOffset:r}=t;return!e||!r?null:De(e,r)}class jt{subscribeToStateChange(e,r={}){const{handlerIds:n}=r;f(typeof e=="function","listener must be a function."),f(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let i=this.store.getState().stateId;const o=()=>{const s=this.store.getState(),a=s.stateId;try{a===i||a===i+1&&!Nt(s.dirtyHandlerIds,n)||e()}finally{i=a}};return this.store.subscribe(o)}subscribeToOffsetChange(e){f(typeof e=="function","listener must be a function.");let r=this.store.getState().dragOffset;const n=()=>{const i=this.store.getState().dragOffset;i!==r&&(r=i,e())};return this.store.subscribe(n)}canDragSource(e){if(!e)return!1;const r=this.registry.getSource(e);return f(r,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:r.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const r=this.registry.getTarget(e);if(f(r,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const n=this.registry.getTargetType(e),i=this.getItemType();return F(n,i)&&r.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const r=this.registry.getSource(e,!0);if(f(r,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const n=this.registry.getSourceType(e),i=this.getItemType();return n!==i?!1:r.isDragging(this,e)}isOverTarget(e,r={shallow:!1}){if(!e)return!1;const{shallow:n}=r;if(!this.isDragging())return!1;const i=this.registry.getTargetType(e),o=this.getItemType();if(o&&!F(i,o))return!1;const s=this.getTargetIds();if(!s.length)return!1;const a=s.indexOf(e);return n?a===s.length-1:a>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return kt(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return Ht(this.store.getState().dragOffset)}constructor(e,r){this.store=e,this.registry=r}}let Ut=0;function $t(){return Ut++}function Vt(t){f(typeof t.canDrag=="function","Expected canDrag to be a function."),f(typeof t.beginDrag=="function","Expected beginDrag to be a function."),f(typeof t.endDrag=="function","Expected endDrag to be a function.")}function Ft(t){f(typeof t.canDrop=="function","Expected canDrop to be a function."),f(typeof t.hover=="function","Expected hover to be a function."),f(typeof t.drop=="function","Expected beginDrag to be a function.")}function q(t,e){if(e&&Array.isArray(t)){t.forEach(r=>q(r,!1));return}f(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}const ie=typeof global<"u"?global:self,Se=ie.MutationObserver||ie.WebKitMutationObserver;function Oe(t){return function(){const r=setTimeout(i,0),n=setInterval(i,50);function i(){clearTimeout(r),clearInterval(n),t()}}}function qt(t){let e=1;const r=new Se(t),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){e=-e,n.data=e}}const Gt=typeof Se=="function"?qt:Oe;class Bt{enqueueTask(e){const{queue:r,requestFlush:n}=this;r.length||(n(),this.flushing=!0),r[r.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const r=this.index;if(this.index++,e[r].call(),this.index>this.capacity){for(let n=0,i=e.length-this.index;n<i;n++)e[n]=e[n+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=Gt(this.flush),this.requestErrorThrow=Oe(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class Yt{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,r){this.onError=e,this.release=r,this.task=null}}class Wt{create(e){const r=this.freeTasks,n=r.length?r.pop():new Yt(this.onError,i=>r[r.length]=i);return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}}const be=new Bt,Xt=new Wt(be.registerPendingError);function zt(t){be.enqueueTask(Xt.create(t))}function Qt(t){const e=$t().toString();switch(t){case b.SOURCE:return`S${e}`;case b.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function oe(t){switch(t[0]){case"S":return b.SOURCE;case"T":return b.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function se(t,e){const r=t.entries();let n=!1;do{const{done:i,value:[,o]}=r.next();if(o===e)return!0;n=!!i}while(!n);return!1}class Kt{addSource(e,r){q(e),Vt(r);const n=this.addHandler(b.SOURCE,e,r);return this.store.dispatch(Ot(n)),n}addTarget(e,r){q(e,!0),Ft(r);const n=this.addHandler(b.TARGET,e,r);return this.store.dispatch(bt(n)),n}containsHandler(e){return se(this.dragSources,e)||se(this.dropTargets,e)}getSource(e,r=!1){return f(this.isSourceId(e),"Expected a valid source ID."),r&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return f(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return f(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return f(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return oe(e)===b.SOURCE}isTargetId(e){return oe(e)===b.TARGET}removeSource(e){f(this.getSource(e),"Expected an existing source."),this.store.dispatch(Et(e)),zt(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){f(this.getTarget(e),"Expected an existing target."),this.store.dispatch(Tt(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const r=this.getSource(e);f(r,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=r}unpinSource(){f(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,r,n){const i=Qt(e);return this.types.set(i,r),e===b.SOURCE?this.dragSources.set(i,n):e===b.TARGET&&this.dropTargets.set(i,n),i}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}function Jt(t,e=void 0,r={},n=!1){const i=Zt(n),o=new jt(i,new Kt(i)),s=new ct(i,o),a=t(s,e,r);return s.receiveBackend(a),s}function Zt(t){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return ye(Mt,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function ae(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function er(t){if(Array.isArray(t))return t}function tr(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,o=!1,s,a;try{for(r=r.call(t);!(i=(s=r.next()).done)&&(n.push(s.value),!(e&&n.length===e));i=!0);}catch(c){o=!0,a=c}finally{try{!i&&r.return!=null&&r.return()}finally{if(o)throw a}}return n}}function rr(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function nr(t,e){return er(t)||tr(t,e)||ir(t,e)||rr()}function ir(t,e){if(t){if(typeof t=="string")return ae(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ae(t,e)}}var ue=0,N=Symbol.for("__VUE_DND_CONTEXT_INSTANCE__");function or(t){return"manager"in t&&t.manager}function sr(t){if(or(t)){var e=t.manager;return[e,!1]}var r=ar(t.backend,t.context,t.options,t.debugMode),n=!t.context;return[r,n]}function ar(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ee(),r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=e;return i[N]||(i[N]=Jt(t,e,r,n)),i[N]}function Ee(){return typeof globalThis<"u"?globalThis:typeof global<"u"?global:window}const ur=u.defineComponent({name:"DndProvider",props:{manager:{type:Object},backend:{type:Function},context:{type:Object},options:{type:Object},debugMode:{type:Boolean}},setup:function(e,r){var n=r.slots,i=nr(sr(e),2),o=i[0],s=i[1];s&&++ue,u.onUnmounted(function(){if(s){var c=Ee();--ue===0&&(c[N]=null)}}),Me(o);var a;return function(){var c;return(a=(c=n.default)===null||c===void 0?void 0:c.call(n))!==null&&a!==void 0?a:null}}});u.defineComponent({props:{connect:{type:Function,required:!0},src:{type:String,required:!0}},setup:function(e){return u.watchEffect(function(){if(!(typeof Image>"u")){var r=!1,n=new Image;return n.src=e.src,n.onload=function(){e.connect(n),r=!0},function(){r&&e.connect(null)}}}),function(){return null}}});function cr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var j=!1,U=!1,lr=function(){function t(r){cr(this,t),this.sourceId=null,this.internalMonitor=r.getMonitor()}var e=t.prototype;return e.receiveHandlerId=function(n){this.sourceId=n},e.getHandlerId=function(){return this.sourceId},e.canDrag=function(){f(!j,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return j=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{j=!1}},e.isDragging=function(){if(!this.sourceId)return!1;f(!U,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return U=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{U=!1}},e.subscribeToStateChange=function(n,i){return this.internalMonitor.subscribeToStateChange(n,i)},e.isDraggingSource=function(n){return this.internalMonitor.isDraggingSource(n)},e.isOverTarget=function(n,i){return this.internalMonitor.isOverTarget(n,i)},e.getTargetIds=function(){return this.internalMonitor.getTargetIds()},e.isSourcePublic=function(){return this.internalMonitor.isSourcePublic()},e.getSourceId=function(){return this.internalMonitor.getSourceId()},e.subscribeToOffsetChange=function(n){return this.internalMonitor.subscribeToOffsetChange(n)},e.canDragSource=function(n){return this.internalMonitor.canDragSource(n)},e.canDropOnTarget=function(n){return this.internalMonitor.canDropOnTarget(n)},e.getItemType=function(){return this.internalMonitor.getItemType()},e.getItem=function(){return this.internalMonitor.getItem()},e.getDropResult=function(){return this.internalMonitor.getDropResult()},e.didDrop=function(){return this.internalMonitor.didDrop()},e.getInitialClientOffset=function(){return this.internalMonitor.getInitialClientOffset()},e.getInitialSourceClientOffset=function(){return this.internalMonitor.getInitialSourceClientOffset()},e.getSourceClientOffset=function(){return this.internalMonitor.getSourceClientOffset()},e.getClientOffset=function(){return this.internalMonitor.getClientOffset()},e.getDifferenceFromInitialOffset=function(){return this.internalMonitor.getDifferenceFromInitialOffset()},t}(),dr=function(t){return t&&typeof Symbol<"u"&&t.constructor===Symbol?"symbol":typeof t};function fr(t){return t?t.__v_isVNode===!0:!1}function gr(t){return t?t.__v_skip:!1}function hr(t){return fr(t)&&dr(t.type)!=="symbol"}function pr(){throw new Error("Only native element nodes can now be passed to Vue DnD connectors.You can either wrap Component into a <div>, or turn it into a drag source or a drop target itself.")}function vr(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(gr(e)&&pr(),!hr(e)){var n=e;return t(n,r),n}}}function mr(t){var e={};return Object.keys(t).forEach(function(r){var n=t[r];if(r.endsWith("Ref"))e[r]=t[r];else{var i=vr(n);e[r]=function(){return i}}}),e}function ce(t,e,r,n){let i=r?r.call(n,t,e):void 0;if(i!==void 0)return!!i;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const o=Object.keys(t),s=Object.keys(e);if(o.length!==s.length)return!1;const a=Object.prototype.hasOwnProperty.bind(e);for(let c=0;c<o.length;c++){const l=o[c];if(!a(l))return!1;const h=t[l],v=e[l];if(i=r?r.call(n,h,v,l):void 0,i===!1||i===void 0&&h!==v)return!1}return!0}function yr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function le(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Dr(t,e,r){return e&&le(t.prototype,e),r&&le(t,r),t}var Sr=function(){function t(r){var n=this;yr(this,t),this.hooks=mr({dragSource:function(i,o){n.clearDragSource(),n.dragSourceOptions=o||null,n.dragSourceNode=i,n.reconnectDragSource()},dragPreview:function(i,o){n.clearDragPreview(),n.dragPreviewOptions=o||null,n.dragPreviewNode=i,n.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceOptionsInternal=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=r}var e=t.prototype;return e.receiveHandlerId=function(n){this.handlerId!==n&&(this.handlerId=n,this.reconnect())},e.reconnect=function(){var n=this.reconnectDragSource();this.reconnectDragPreview(n)},e.reconnectDragSource=function(){var n=this.dragSource,i=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return i&&this.disconnectDragSource(),this.handlerId?n?(i&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=n,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,n,this.dragSourceOptions)),i):(this.lastConnectedDragSource=n,i):i},e.reconnectDragPreview=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=this.dragPreview,o=n||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(o&&this.disconnectDragPreview(),!!this.handlerId){if(!i){this.lastConnectedDragPreview=i;return}o&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=i,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,i,this.dragPreviewOptions))}},e.didHandlerIdChange=function(){return this.lastConnectedHandlerId!==this.handlerId},e.didConnectedDragSourceChange=function(){return this.lastConnectedDragSource!==this.dragSource},e.didConnectedDragPreviewChange=function(){return this.lastConnectedDragPreview!==this.dragPreview},e.didDragSourceOptionsChange=function(){return!ce(this.lastConnectedDragSourceOptions,this.dragSourceOptions)},e.didDragPreviewOptionsChange=function(){return!ce(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)},e.disconnectDragSource=function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)},e.disconnectDragPreview=function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null)},e.clearDragSource=function(){this.dragSourceNode=null},e.clearDragPreview=function(){this.dragPreviewNode=null},Dr(t,[{key:"connectTarget",get:function(){return this.dragSource}},{key:"dragSourceOptions",get:function(){return this.dragSourceOptionsInternal},set:function(n){this.dragSourceOptionsInternal=n}},{key:"dragPreviewOptions",get:function(){return this.dragPreviewOptionsInternal},set:function(n){this.dragPreviewOptionsInternal=n}},{key:"dragSource",get:function(){return this.dragSourceNode}},{key:"dragPreview",get:function(){return this.dragPreviewNode}}]),t}();function Or(t,e,r){var n=r.getRegistry(),i=n.addSource(t,e);return[i,function(){return n.removeSource(i)}]}function br(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Er=function(){function t(r,n,i){br(this,t),this.spec=r,this.monitor=n,this.connector=i}var e=t.prototype;return e.beginDrag=function(){var n=this.spec,i=this.monitor,o=null;return typeof n.item=="object"?o=n.item:typeof n.item=="function"?o=n.item(i):o={},o??null},e.canDrag=function(){var n=this.spec,i=this.monitor;return typeof n.canDrag=="boolean"?n.canDrag:typeof n.canDrag=="function"?n.canDrag(i):!0},e.isDragging=function(n,i){var o=this.spec,s=this.monitor,a=o.isDragging;return a?a(s):i===n.getSourceId()},e.endDrag=function(){var n=this.spec,i=this.monitor,o=this.connector,s=n.end;s&&s(i.getItem(),i),o.reconnect()},t}();function Tr(t,e,r){var n=u.computed(function(){return new Er(u.unref(t),u.unref(e),u.unref(r))});return u.watchEffect(function(){n.value.spec=u.unref(t)}),n}function K(){var t=Le();return f(t!=null,"Expected drag drop context"),t}function Ir(t){return u.computed(function(){var e=u.unref(t).type;return f(e!=null,"spec.type must be defined"),e})}function de(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function wr(t){if(Array.isArray(t))return t}function Cr(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,o=!1,s,a;try{for(r=r.call(t);!(i=(s=r.next()).done)&&(n.push(s.value),!(e&&n.length===e));i=!0);}catch(c){o=!0,a=c}finally{try{!i&&r.return!=null&&r.return()}finally{if(o)throw a}}return n}}function _r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Nr(t,e){return wr(t)||Cr(t,e)||Pr(t,e)||_r()}function Pr(t,e){if(t){if(typeof t=="string")return de(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return de(t,e)}}function xr(t,e,r){var n=K(),i=Tr(t,e,r),o=Ir(t);u.watchEffect(function(a){if(u.unref(o)!=null){var c=Nr(Or(u.unref(o),u.unref(i),u.unref(n)),2),l=c[0],h=c[1];u.unref(e).receiveHandlerId(l),u.unref(r).receiveHandlerId(l),a(h)}})}function Rr(t){return u.computed(function(){return typeof t=="function"?t():t})}function Ar(){var t=K();return u.computed(function(){return new lr(u.unref(t))})}function Mr(t,e){var r=K(),n=u.computed(function(){return new Sr(u.unref(r).getBackend())});return u.watchEffect(function(i){n.value.dragSourceOptions=u.unref(t)||null,u.unref(n).reconnect(),i(function(){n.value.disconnectDragSource()})}),u.watchEffect(function(i){n.value.dragPreviewOptions=u.unref(e)||null,u.unref(n).reconnect(),i(function(){n.value.disconnectDragPreview()})}),n}var Te=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!t(e[i],r[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;i--!==0;){var s=o[i];if(!t(e[s],r[s]))return!1}return!0}return e!==e&&r!==r};function Lr(t,e,r){var n=u.ref(u.unref(e)(u.unref(t))),i=function(){var o=u.unref(e)(u.unref(t));Te(n,o)||(n.value=o,r&&r())};return u.watchEffect(i),[n,i]}function fe(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function kr(t){if(Array.isArray(t))return t}function Hr(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,o=!1,s,a;try{for(r=r.call(t);!(i=(s=r.next()).done)&&(n.push(s.value),!(e&&n.length===e));i=!0);}catch(c){o=!0,a=c}finally{try{!i&&r.return!=null&&r.return()}finally{if(o)throw a}}return n}}function jr(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ur(t,e){return kr(t)||Hr(t,e)||$r(t,e)||jr()}function $r(t,e){if(t){if(typeof t=="string")return fe(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fe(t,e)}}function Vr(t,e,r){var n=Ur(Lr(t,e,r),2),i=n[0],o=n[1];return u.watchEffect(function(a){var c=u.unref(t).getHandlerId();c!=null&&a(u.unref(t).subscribeToStateChange(o,{handlerIds:[c]}))}),i}function Fr(t,e,r){var n=function(){return{}};return Vr(e,t||n,function(){return u.unref(r).reconnect()})}function Ie(t,e){var r=u.reactive({el:null,options:u.unref(e)});u.watchEffect(function(){t(r)},{flush:"post"});var n=function(i,o){Z(r,"el",i);var s=u.unref(e)||o;return Te(r.options,s)||Z(r,"options",s),u.unref(i)};return n}function qr(t,e){return Ie(function(r){u.unref(t).hooks.dragSource()(r.el,r.options)},u.computed(function(){return u.unref(e).options}))}function Gr(t,e){return Ie(function(r){u.unref(t).hooks.dragPreview()(r.el,r.options)},u.computed(function(){return u.unref(e).previewOptions}))}function Br(t){var e=Rr(t),r=Ar(),n=Mr(u.computed(function(){return u.unref(e).options}),u.computed(function(){return u.unref(e).previewOptions}));return xr(e,r,n),[Fr(u.computed(function(){return u.unref(e).collect||function(){return{}}}),r,n),qr(n,e),Gr(n,e)]}function we(t){let e=null;return()=>(e==null&&(e=t()),e)}function Yr(t,e){return t.filter(r=>r!==e)}function Wr(t,e){const r=new Set,n=o=>r.add(o);t.forEach(n),e.forEach(n);const i=[];return r.forEach(o=>i.push(o)),i}class Xr{enter(e){const r=this.entered.length,n=i=>this.isNodeInDocument(i)&&(!i.contains||i.contains(e));return this.entered=Wr(this.entered.filter(n),[e]),r===0&&this.entered.length>0}leave(e){const r=this.entered.length;return this.entered=Yr(this.entered.filter(this.isNodeInDocument),e),r>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class zr{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const r={};Object.keys(this.config.exposeProperties).forEach(n=>{const i=this.config.exposeProperties[n];i!=null&&(r[n]={value:i(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,r)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,r){return r===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const Ce="__NATIVE_FILE__",_e="__NATIVE_URL__",Ne="__NATIVE_TEXT__",Pe="__NATIVE_HTML__",ge=Object.freeze(Object.defineProperty({__proto__:null,FILE:Ce,HTML:Pe,TEXT:Ne,URL:_e},Symbol.toStringTag,{value:"Module"}));function $(t,e,r){const n=e.reduce((i,o)=>i||t.getData(o),"");return n??r}const G={[Ce]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[Pe]:{exposeProperties:{html:(t,e)=>$(t,e,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[_e]:{exposeProperties:{urls:(t,e)=>$(t,e,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[Ne]:{exposeProperties:{text:(t,e)=>$(t,e,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function Qr(t,e){const r=G[t];if(!r)throw new Error(`native type ${t} has no configuration`);const n=new zr(r);return n.loadDataTransfer(e),n}function V(t){if(!t)return null;const e=Array.prototype.slice.call(t.types||[]);return Object.keys(G).filter(r=>{const n=G[r];return n!=null&&n.matchesTypes?n.matchesTypes.some(i=>e.indexOf(i)>-1):!1})[0]||null}const Kr=we(()=>/firefox/i.test(navigator.userAgent)),xe=we(()=>!!window.safari);class he{interpolate(e){const{xs:r,ys:n,c1s:i,c2s:o,c3s:s}=this;let a=r.length-1;if(e===r[a])return n[a];let c=0,l=s.length-1,h;for(;c<=l;){h=Math.floor(.5*(c+l));const d=r[h];if(d<e)c=h+1;else if(d>e)l=h-1;else return n[h]}a=Math.max(0,l);const v=e-r[a],p=v*v;return n[a]+i[a]*v+o[a]*p+s[a]*v*p}constructor(e,r){const{length:n}=e,i=[];for(let d=0;d<n;d++)i.push(d);i.sort((d,y)=>e[d]<e[y]?-1:1);const o=[],s=[];let a,c;for(let d=0;d<n-1;d++)a=e[d+1]-e[d],c=r[d+1]-r[d],o.push(a),s.push(c/a);const l=[s[0]];for(let d=0;d<o.length-1;d++){const y=s[d],g=s[d+1];if(y*g<=0)l.push(0);else{a=o[d];const m=o[d+1],D=a+m;l.push(3*D/((D+m)/y+(D+a)/g))}}l.push(s[s.length-1]);const h=[],v=[];let p;for(let d=0;d<l.length-1;d++){p=s[d];const y=l[d],g=1/o[d],m=y+l[d+1]-p-p;h.push((p-y-m)*g),v.push(m*g*g)}this.xs=e,this.ys=r,this.c1s=l,this.c2s=h,this.c3s=v}}const Jr=1;function Re(t){const e=t.nodeType===Jr?t:t.parentElement;if(!e)return null;const{top:r,left:n}=e.getBoundingClientRect();return{x:n,y:r}}function _(t){return{x:t.clientX,y:t.clientY}}function Zr(t){var e;return t.nodeName==="IMG"&&(Kr()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(t)))}function en(t,e,r,n){let i=t?e.width:r,o=t?e.height:n;return xe()&&t&&(o/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:o}}function tn(t,e,r,n,i){const o=Zr(e),a=Re(o?t:e),c={x:r.x-a.x,y:r.y-a.y},{offsetWidth:l,offsetHeight:h}=t,{anchorX:v,anchorY:p}=n,{dragPreviewWidth:d,dragPreviewHeight:y}=en(o,e,l,h),g=()=>{let J=new he([0,.5,1],[c.y,c.y/h*y,c.y+y-h]).interpolate(p);return xe()&&o&&(J+=(window.devicePixelRatio-1)*y),J},m=()=>new he([0,.5,1],[c.x,c.x/l*d,c.x+d-l]).interpolate(v),{offsetX:D,offsetY:S}=i,E=D===0||D,k=S===0||S;return{x:E?D:m(),y:k?S:g()}}class rn{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,r){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=r}}function nn(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){nn(t,i,r[i])})}return t}class on{profile(){var e,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,r,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,r),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,r,n){this.sourceNodes.set(e,r),this.sourceNodeOptions.set(e,n);const i=s=>this.handleDragStart(s,e),o=s=>this.handleSelectStart(s);return r.setAttribute("draggable","true"),r.addEventListener("dragstart",i),r.addEventListener("selectstart",o),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),r.removeEventListener("dragstart",i),r.removeEventListener("selectstart",o),r.setAttribute("draggable","false")}}connectDropTarget(e,r){const n=s=>this.handleDragEnter(s,e),i=s=>this.handleDragOver(s,e),o=s=>this.handleDrop(s,e);return r.addEventListener("dragenter",n),r.addEventListener("dragover",i),r.addEventListener("drop",o),()=>{r.removeEventListener("dragenter",n),r.removeEventListener("dragover",i),r.removeEventListener("drop",o)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(e);return pe({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourcePreviewNodeOptions.get(e);return pe({anchorX:.5,anchorY:.5,captureDraggingState:!1},r||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(ge).some(r=>ge[r]===e)}beginDragNativeItem(e,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=Qr(e,r),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const r=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},r)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,r){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}handleDragEnter(e,r){this.dragEnterTargetIds.unshift(r)}handleDragOver(e,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}handleDrop(e,r){this.dropTargetIds.unshift(r)}constructor(e,r,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=i=>{const o=this.sourceNodes.get(i);return o&&Re(o)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=i=>!!(i&&this.document&&this.document.body&&this.document.body.contains(i)),this.endDragIfSourceWasRemovedFromDOM=()=>{const i=this.currentDragSourceNode;i==null||this.isNodeInDocument(i)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=i=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(i||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=i=>{if(i.defaultPrevented)return;const{dragStartSourceIds:o}=this;this.dragStartSourceIds=null;const s=_(i);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(o||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:s});const{dataTransfer:a}=i,c=V(a);if(this.monitor.isDragging()){if(a&&typeof a.setDragImage=="function"){const h=this.monitor.getSourceId(),v=this.sourceNodes.get(h),p=this.sourcePreviewNodes.get(h)||v;if(p){const{anchorX:d,anchorY:y,offsetX:g,offsetY:m}=this.getCurrentSourcePreviewNodeOptions(),E=tn(v,p,s,{anchorX:d,anchorY:y},{offsetX:g,offsetY:m});a.setDragImage(p,E.x,E.y)}}try{a==null||a.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(i.target);const{captureDraggingState:l}=this.getCurrentSourcePreviewNodeOptions();l?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(c)this.beginDragNativeItem(c);else{if(a&&!a.types&&(i.target&&!i.target.hasAttribute||!i.target.hasAttribute("draggable")))return;i.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=i=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var o;(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(i.dataTransfer)}if(!this.enterLeaveCounter.enter(i.target)||this.monitor.isDragging())return;const{dataTransfer:a}=i,c=V(a);c&&this.beginDragNativeItem(c,a)},this.handleTopDragEnter=i=>{const{dragEnterTargetIds:o}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=i.altKey,o.length>0&&this.actions.hover(o,{clientOffset:_(i)}),o.some(a=>this.monitor.canDropOnTarget(a))&&(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=i=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var o;(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(i.dataTransfer)}},this.handleTopDragOver=i=>{const{dragOverTargetIds:o}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none");return}this.altKeyPressed=i.altKey,this.lastClientOffset=_(i),this.scheduleHover(o),(o||[]).some(a=>this.monitor.canDropOnTarget(a))?(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?i.preventDefault():(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=i=>{this.isDraggingNativeItem()&&i.preventDefault(),this.enterLeaveCounter.leave(i.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=i=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var o;i.preventDefault(),(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(i.dataTransfer)}else V(i.dataTransfer)&&i.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=i=>{const{dropTargetIds:o}=this;this.dropTargetIds=[],this.actions.hover(o,{clientOffset:_(i)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=i=>{const o=i.target;typeof o.dragDrop=="function"&&(o.tagName==="INPUT"||o.tagName==="SELECT"||o.tagName==="TEXTAREA"||o.isContentEditable||(i.preventDefault(),o.dragDrop()))},this.options=new rn(r,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new Xr(this.isNodeInDocument)}}const sn=function(e,r,n){return new on(e,r,n)},P=u.defineComponent({__name:"DndProvider",setup(t){return(e,r)=>(u.openBlock(),u.createBlock(u.unref(ur),{backend:u.unref(sn)},{default:u.withCtx(()=>[u.renderSlot(e.$slots,"default")]),_:3},8,["backend"]))}});P.install=t=>{t.component(P.__name,P)};const an=t=>(u.pushScopeId("data-v-2646bd48"),t=t(),u.popScopeId(),t),un=an(()=>u.createElementVNode("div",null,"111",-1)),cn=u.defineComponent({__name:"Draggable",setup(t){const[e,r]=Br(()=>({type:"CommonDrag",canDrag:!0,collect:n=>({isDragging:n.isDragging(),handlerId:n.getHandlerId()})}));return(n,i)=>(u.openBlock(),u.createElementBlock("div",{class:"box",ref:u.unref(r)},[un,u.renderSlot(n.$slots,"default",{},void 0,!0)],512))}});const ln=(t,e)=>{const r=t.__vccOpts||t;for(const[n,i]of e)r[n]=i;return r},C=ln(cn,[["__scopeId","data-v-2646bd48"]]);C.install=t=>{t.component(C.__name,C)};const dn=[C,P],fn=t=>{dn.forEach(e=>{t.component(e.__name,e)})},gn={install:fn};exports.default=gn;exports.draggable=C;
